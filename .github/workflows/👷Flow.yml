name: 👷Flow

on:
  push:
    branches: ["main"]
  pull_request:
  workflow_dispatch:
  merge_group:


jobs:
  # secret:
  #   uses: mraniki/coding_toolset/.github/workflows/👁️Secret.yml@main
  #   with:
  #     repo: ${{ github.event.repository.name }}
  #   secrets: inherit
  lint:
    uses: mraniki/coding_toolset/.github/workflows/🦺Lint.yml@main
    secrets: inherit
  test:
    #needs: [lint,secret]
    needs: [lint]
    uses: mraniki/coding_toolset/.github/workflows/🧪Test.yml@main
    # with:
    #   settings_location: ${{ needs.secret.outputs.SETTINGS_LOCATION }}
    secrets: inherit
  build:
    needs: [lint]
    uses: mraniki/coding_toolset/.github/workflows/🐍Build.yml@main
    # with:
    #   settings_token: ${{ needs.secret.outputs.TOKEN }} 
    secrets: inherit
  release:
    needs: [build]
    uses: mraniki/coding_toolset/.github/workflows/📦Release.yml@main
    with:
      settings_publish: true
    # with:
    #   settings_pypi: ${{ needs.secret.outputs.PYPI_API_TOKEN }}
    #   settings_token: ${{ needs.secret.outputs.TOKEN }} 
    secrets: inherit
